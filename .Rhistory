#
#                  # Practices
#                  off_farm_any+
#                  till_not_by_hand+
#                  external_labour+
#                  pesticide+
#                  debts_have+
#                  aidreceived+
#                  livestock_inputs_any+
#                  land_irrigated_any+
#
#                  #------------------
#                # Village Level
#                  norm_growing_period +
#                  log_min_travel_time +
#                  log_pop_dens +
#                  #------------------
#                #County Level
#                norm_gdl_country_shdi+
#
#                  # Levels
#                  (1 | iso_country_code) +
#                  (1 | iso_country_code:village)),
#     prior="horseshoe"
#   ),
models <-  list(
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# TVA --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# Weak Prior Model --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
list(
tag="weak_prior_fixed",
data=indicator_data,
formula=bf(log_tva ~ 1 +
#------------------
#Household Level
# Demographics
log_hh_size +
education_cleaned +
#Assets
log_livestock_tlu +
log_land_cultivated +
# Practices
off_farm_any+
till_not_by_hand+
external_labour+
pesticide+
debts_have+
aidreceived+
livestock_inputs_any+
land_irrigated_any+
#------------------
# Village Level
norm_growing_period +
log_min_travel_time +
log_pop_dens +
#------------------
#County Level
norm_gdl_country_shdi+
# Levels
(1 | iso_country_code) +
(1 | iso_country_code:village)),
prior="weak"
),
# list(
#   tag="weak_prior_mixed_country",
#   data=indicator_data,
#   formula=bf(log_tva ~ 1 +
#                #Household Level
#                # Demographics
#                log_hh_size +
#                education_cleaned +
#
#                #Assets
#                log_livestock_tlu +
#                log_land_cultivated +
#
#                # Practices
#                off_farm_any+
#                till_not_by_hand+
#                external_labour+
#                pesticide+
#                debts_have+
#                aidreceived+
#                livestock_inputs_any+
#                land_irrigated_any+
#
#                #------------------
#              # Village Level
#              norm_growing_period +
#                log_min_travel_time +
#                log_pop_dens +
#                #------------------
#              #County Level
#              norm_gdl_country_shdi+
#                # Levels
#                (1 +
#                   log_land_cultivated +
#                   log_livestock_tlu +
#                   off_farm_any | iso_country_code) +
#                (1 | iso_country_code:village)),
#   prior="weak"),
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# Horse Shoe Model --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
#
#   list(
#     tag="horseshoe_fixed",
#     data=indicator_data,
#     formula=bf(log_tva ~ 1 +
#                  #Household Level
#                  # Demographics
#                  log_hh_size +
#                  education_cleaned +
#
#                  #Assets
#                  log_livestock_tlu +
#                  log_land_cultivated +
#
#                  # Practices
#                  off_farm_any+
#                  till_not_by_hand+
#                  external_labour+
#                  pesticide+
#                  debts_have+
#                  aidreceived+
#                  livestock_inputs_any+
#                  land_irrigated_any+
#
#                  #------------------
#                # Village Level
#                  norm_growing_period +
#                  log_min_travel_time +
#                  log_pop_dens +
#                  #------------------
#                #County Level
#                norm_gdl_country_shdi+
#
#                  # Levels
#                  (1 | iso_country_code) +
#                  (1 | iso_country_code:village)),
#     prior="horseshoe"
#   ),
#
#
#   list(
#     tag="horseshoe_mixed_country",
#     data=indicator_data,
#     formula=bf(log_tva ~ 1 +
#                  #Household Level
#                  # Demographics
#                  log_hh_size +
#                  education_cleaned +
#
#                  #Assets
#                  log_livestock_tlu +
#                  log_land_cultivated +
#
#                  # Practices
#                  off_farm_any+
#                  till_not_by_hand+
#                  external_labour+
#                  pesticide+
#                  debts_have+
#                  aidreceived+
#                  livestock_inputs_any+
#                  land_irrigated_any+
#
#                  #------------------
#                # Village Level
#                norm_growing_period +
#                  log_min_travel_time +
#                  log_pop_dens +
#                  #------------------
#                #County Level
#                norm_gdl_country_shdi+
#
#                  # Levels
#                  (1 +
#                     log_land_cultivated +
#                     log_livestock_tlu +
#                     off_farm_any | iso_country_code) +
#                  (1 | iso_country_code:village)),
#     prior="horseshoe"),
#
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# HDDS --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# Weak Prior Model --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
list(
tag="weak_prior_fixed",
data=indicator_data,
formula=bf(norm_hdds_lean_season ~ 1 +
#------------------
#Household Level
# Demographics
log_hh_size +
education_cleaned +
#Assets
log_livestock_tlu +
log_land_cultivated +
# Practices
off_farm_any+
till_not_by_hand+
external_labour+
pesticide+
debts_have+
aidreceived+
livestock_inputs_any+
land_irrigated_any+
#------------------
# Village Level
norm_growing_period +
log_min_travel_time +
log_pop_dens +
#------------------
#County Level
norm_gdl_country_shdi+
# Levels
(1 | iso_country_code) +
(1 | iso_country_code:village)),
prior="weak"
)
# list(
#   tag="weak_prior_mixed_country",
#   data=indicator_data,
#   formula=bf(norm_hdds_lean_season ~ 1 +
#                #Household Level
#                # Demographics
#                log_hh_size +
#                education_cleaned +
#
#                #Assets
#                log_livestock_tlu +
#                log_land_cultivated +
#
#                # Practices
#                off_farm_any+
#                till_not_by_hand+
#                external_labour+
#                pesticide+
#                debts_have+
#                aidreceived+
#                livestock_inputs_any+
#                land_irrigated_any+
#                log_pop_dens +
#                #------------------
#              # Village Level
#              norm_growing_period +
#                log_min_travel_time +
#                log_pop_dens +
#                #------------------
#              #County Level
#              norm_gdl_country_shdi+
#                # Levels
#                (1 +
#                   log_land_cultivated +
#                   log_livestock_tlu +
#                   off_farm_any | iso_country_code) +
#                (1 | iso_country_code:village)),
#   prior="weak"),
#
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# Horse Shoe Model --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# list(
#   tag="horseshoe_fixed",
#   data=indicator_data,
#   formula=bf(norm_hdds_lean_season ~ 1 +
#                #Household Level
#                # Demographics
#                log_hh_size +
#                education_cleaned +
#
#                #Assets
#                log_livestock_tlu +
#                log_land_cultivated +
#
#                # Practices
#                off_farm_any+
#                till_not_by_hand+
#                external_labour+
#                pesticide+
#                debts_have+
#                aidreceived+
#                livestock_inputs_any+
#                land_irrigated_any+
#
#                #------------------
#              # Village Level
#              norm_growing_period +
#                log_min_travel_time +
#                log_pop_dens +
#                #------------------
#              #County Level
#              norm_gdl_country_shdi+
#
#                # Levels
#                (1 | iso_country_code) +
#                (1 | iso_country_code:village)),
#   prior="horseshoe"
# ),
#
#   list(
#     tag="horseshoe_mixed_country",
#     data=indicator_data,
#     formula=bf(norm_hdds_lean_season ~ 1 +
#                  #Household Level
#                  # Demographics
#                  log_hh_size +
#                  education_cleaned +
#
#                  #Assets
#                  log_livestock_tlu +
#                  log_land_cultivated +
#
#                  # Practices
#                  off_farm_any+
#                  till_not_by_hand+
#                  external_labour+
#                  pesticide+
#                  debts_have+
#                  aidreceived+
#                  livestock_inputs_any+
#                  land_irrigated_any+
#
#                  #------------------
#                # Village Level
#                norm_growing_period +
#                  log_min_travel_time +
#                  log_pop_dens +
#                  #------------------
#                #County Level
#                norm_gdl_country_shdi+
#
#                  # Levels
#                  (1 +
#                     log_land_cultivated +
#                     log_livestock_tlu +
#                     off_farm_any | iso_country_code) +
#                  (1 | iso_country_code:village)),
#     prior="horseshoe"),
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# Fixed effects only ------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# list(
#   tag="weak_fixed_only",
#   data=indicator_data,
#   formula=bf(norm_hdds_lean_season ~ 1 +
#                #Household Level
#                # Demographics
#                log_hh_size +
#                education_cleaned +
#
#                #Assets
#                log_livestock_tlu +
#                log_land_cultivated +
#
#                # Practices
#                off_farm_any+
#                till_not_by_hand+
#                external_labour+
#                pesticide+
#                debts_have+
#                aidreceived+
#                livestock_inputs_any+
#                land_irrigated_any+
#
#                #------------------
#              # Village Level
#              norm_growing_period +
#                log_min_travel_time +
#                log_pop_dens +
#                #------------------
#              #County Level
#              norm_gdl_country_shdi),
#   prior="weak"),
#
# list(
#   tag="horseshoe_fixed_only",
#   data=indicator_data,
#   formula=bf(norm_hdds_lean_season ~ 1 +
#                #Household Level
#                # Demographics
#                log_hh_size +
#                education_cleaned +
#
#                #Assets
#                log_livestock_tlu +
#                log_land_cultivated +
#
#                # Practices
#                off_farm_any+
#                till_not_by_hand+
#                external_labour+
#                pesticide+
#                debts_have+
#                aidreceived+
#                livestock_inputs_any+
#                land_irrigated_any+
#
#                #------------------
#              # Village Level
#              norm_growing_period +
#                log_min_travel_time +
#                log_pop_dens +
#                #------------------
#              #County Level
#              norm_gdl_country_shdi),
#   prior="horseshoe"),
#
# list(
#   tag="weak_fixed_only",
#   data=indicator_data,
#   formula=bf(log_tva ~ 1 +
#                #Household Level
#                # Demographics
#                log_hh_size +
#                education_cleaned +
#
#                #Assets
#                log_livestock_tlu +
#                log_land_cultivated +
#
#                # Practices
#                off_farm_any+
#                till_not_by_hand+
#                external_labour+
#                pesticide+
#                debts_have+
#                aidreceived+
#                livestock_inputs_any+
#                land_irrigated_any+
#
#                #------------------
#              # Village Level
#              norm_growing_period +
#                log_min_travel_time +
#                log_pop_dens +
#                #------------------
#              #County Level
#              norm_gdl_country_shdi),
#   prior="weak"),
#
# list(
#   tag="horseshoe_fixed_only",
#   data=indicator_data,
#   formula=bf(log_tva ~ 1 +
#                #Household Level
#                # Demographics
#                log_hh_size +
#                education_cleaned +
#
#                #Assets
#                log_livestock_tlu +
#                log_land_cultivated +
#
#                # Practices
#                off_farm_any+
#                till_not_by_hand+
#                external_labour+
#                pesticide+
#                debts_have+
#                aidreceived+
#                livestock_inputs_any+
#                land_irrigated_any+
#
#                #------------------
#              # Village Level
#              norm_growing_period +
#                log_min_travel_time +
#                log_pop_dens +
#                #------------------
#              #County Level
#              norm_gdl_country_shdi),
#   prior="horseshoe")
)
length(models)
?brm
model <- loadRData("outputs/31_05_2023/outputs/overall_models/variable_addition/tva/weak_prior_fixed.rda")
loadRData <- function(fileName){
#loads an RData file, and returns it
load(fileName)
get(ls()[ls() != "fileName"])
}
model <- loadRData("outputs/31_05_2023/outputs/overall_models/variable_addition/tva/weak_prior_fixed.rda")
model
ref_model <- get_refmodel(model)
library(brms)
library(projpred)
ref_model <- get_refmodel(model)
ref_model
model
plot(model)
