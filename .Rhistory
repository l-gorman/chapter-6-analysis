aidreceived
aidreceived <- indicator_data$aidreceived
aidreceived[aidreceived=="dont_know"] <- NA
aidreceived[aidreceived=="no_answer"] <- NA
aidreceived <- indicator_data$aidreceived
aidreceived[aidreceived=="dont_know"] <- NA
aidreceived[aidreceived=="no_answer"] <- NA
aidreceived <- aidreceived=="y"
aidreceived <- as.numeric(aidreceived)
aidreceived
livestock_inputs_use <- indicator_data$livestock_inputs_use
livestock_inputs_use
table(indicator_data$livestock_inputs_use)
table(indicator_data$livestock_inputs_use)
table(indicator_data$agric_inputs)
table(indicator_data$land_irrigated)
livestock_inputs_use <- indicator_data$livestock_inputs_use
table(indicator_data$livestock_inputs_use)
livestock_inputs_use
livestock_inputs_use <- indicator_data$livestock_inputs_use
livestock_inputs_use[livestock_inputs_use=="no_answer"] <- NA
livestock_inputs_use <- livestock_inputs_use=="y"
livestock_inputs_use <- as.numeric(livestock_inputs_use)
livestock_inputs_use
table(livestock_inputs_use)
table(indicator_data$livestock_inputs_use)
table(indicator_data$livestock_inputs_use)
table(indicator_data$livestock_all)
table(is.na(indicator_data$livestock_all))
livestock_inputs_use <- indicator_data$livestock_inputs_use
livestock_inputs_use[livestock_inputs_use=="no_answer"] <- NA
livestock_inputs_use <- livestock_inputs_use=="y"
livestock_inputs_use <- as.numeric(livestock_inputs_use)
livestock_inputs_use[is.na(indicator_data$livestock_all)] <- 0
table(livestock_inputs_use)
indicator_data$livestock_inputs_any <- livestock_inputs_use
livestock_inputs_any
indicator_data$livestock_inputs_any
table(indicator_data$land_irrigated)
land_irrigated <- indicator_data$land_irrigated
land_irrigated[land_irrigated=="no_answer"] <- NA
land_irrigated[land_irrigated=="dont_know"] <- NA
land_irrigated[land_irrigated=="none"] <- "n"
land_irrigated[land_irrigated%in%c("all","half","little","most","underhalf")] <- "y"
land_irrigated <- land_irrigated=="y"
table(land_irrigated)
land_irrigated <- as.numeric(land_irrigated)
land_irrigated <- indicator_data$land_irrigated
land_irrigated[land_irrigated=="no_answer"] <- NA
land_irrigated[land_irrigated=="dont_know"] <- NA
land_irrigated[land_irrigated=="none"] <- "n"
land_irrigated[land_irrigated%in%c("all","half","little","most","underhalf")] <- "y"
land_irrigated <- land_irrigated=="y"
land_irrigated <- as.numeric(land_irrigated)
indicator_data$land_irrigated_any <- land_irrigated
indicator_data$external_labour
#labour
hired_labour <- grepl("hire_labour",indicator_data$farm_labour) |
grepl("reciprocal",indicator_data$farm_labour)
hired_labour <- as.numeric(hired_labour)
indicator_data$external_labour
indicator_data$external_labour <- hired_labour
indicator_data$external_labour
till_not_by_hand <- grepl("by_animal",indicator_data$tillage_power) |
grepl("by_machine",indicator_data$tillage_power)
till_not_by_hand <- as.numeric(till_not_by_hand)
till_not_by_hand
indicator_data$till_not_by_hand <- till_not_by_hand
source("~/research/phd/chapter-6-analysis/src/02-data-exploration/04-aggregating-categories.R")
rlang::last_trace()
modelling_data_set
complete.cases(modelling_data_set)
table(complete.cases(modelling_data_set))
till_not_by_hand <- grepl("by_animal",indicator_data$tillage_power) |
grepl("by_machine",indicator_data$tillage_power)
till_not_by_hand <- as.numeric(till_not_by_hand)
indicator_data$till_not_by_hand <- till_not_by_hand
table(is.na(indicator_data$till_not_by_hand))
#labour
hired_labour <- grepl("hire_labour",indicator_data$farm_labour) |
grepl("reciprocal",indicator_data$farm_labour)
hired_labour <- as.numeric(hired_labour)
indicator_data$external_labour <- hired_labour
table(is.na(indicator_data$external_labour))
pesticide <- grepl("pest",indicator_data$agric_inputs)
pesticide <- as.numeric(pesticide)
indicator_data$pesticide <- pesticide
table(is.na(indicator_data$pesticide))
legume_fert <- indicator_data$use_legumes_fertility=="y" |
indicator_data$use_legumes_fertility=="rotation" |
indicator_data$use_legumes_fertility=="intercrop"
legume_fert <- as.numeric(legume_fert)
indicator_data$legume_fert <- legume_fert
table(is.na(indicator_data$legume_fert ))
indicator_data$use_legumes_fertility
table( indicator_data$use_legumes_fertility)
table( is.na(indicator_data$use_legumes_fertility))
debts_have <- indicator_data$debts_have
debts_have[debts_have=="dont_know"] <- NA
debts_have[debts_have=="no_answer"] <- NA
debts_have <- debts_have=="y"
debts_have <- as.numeric(debts_have)
indicator_data$debts_have <- debts_have
table(is.na(indicator_data$debts_have))
debts_have <- indicator_data$debts_have
debts_have[debts_have=="dont_know"] <- NA
debts_have[debts_have=="no_answer"] <- NA
debts_have <- debts_have=="y"
debts_have <- as.numeric(debts_have)
indicator_data$debts_have <- debts_have
aidreceived <- indicator_data$aidreceived
aidreceived[aidreceived=="dont_know"] <- NA
aidreceived[aidreceived=="no_answer"] <- NA
aidreceived <- aidreceived=="y"
aidreceived <- as.numeric(aidreceived)
indicator_data$aidreceived <- aidreceived
table(is.na(indicator_data$aidreceived))
livestock_inputs_use <- indicator_data$livestock_inputs_use
livestock_inputs_use[livestock_inputs_use=="no_answer"] <- NA
livestock_inputs_use <- livestock_inputs_use=="y"
livestock_inputs_use <- as.numeric(livestock_inputs_use)
livestock_inputs_use[is.na(indicator_data$livestock_all)] <- 0
indicator_data$livestock_inputs_any <- livestock_inputs_use
table(is.na(indicator_data$livestock_inputs_any))
land_irrigated <- indicator_data$land_irrigated
land_irrigated[land_irrigated=="no_answer"] <- NA
land_irrigated[land_irrigated=="dont_know"] <- NA
land_irrigated[land_irrigated=="none"] <- "n"
land_irrigated[land_irrigated%in%c("all","half","little","most","underhalf")] <- "y"
land_irrigated <- land_irrigated=="y"
land_irrigated <- as.numeric(land_irrigated)
indicator_data$land_irrigated_any <- land_irrigated
table(is.na(indicator_data$land_irrigated_any))
source("~/research/phd/chapter-6-analysis/src/02-data-exploration/04-aggregating-categories.R")
source("~/research/phd/chapter-6-analysis/src/02-data-exploration/04-aggregating-categories.R")
table(complete.cases(modelling_data_set))
colSums(is.na(modelling_data_set))
nrow(modelling_data_set)
modelling_data_set <- indicator_data[vars]
modelling_data_set <- indicator_data[vars]
#Add off-farm income
vars <- c(
"id_form",
"id_unique",
"gdlcode",
"iso_country_code",
"village",
"hh_size_mae",
"education_cleaned",
"livestock_tlu", # centered transform
"land_cultivated_ha",
"off_farm_any",
# "proportion_female_control",
# "livestock_orientation", #logit transform
# "crop_orientation", #logit transform
# "off_farm_orientation", #logit transform
# "market_orientation", # logit transform
"till_not_by_hand",
"external_labour",
"pesticide",
"debts_have",
"aidreceived",
"livestock_inputs_any",
"land_irrigated_any",
# "weighted_income_diversity", # centred transform
"tva_per_mae_per_day_ppp", # centered transform
"hdds_lean_season", # z-score notmalisation
# Village Level Variables
"adjusted_length_growing_period", # centered transform
"min_travel_time", # centered transform
"kg_class_name",
"population_density",
# County Level Variables
"gdl_shdi",
# Country Level Variables
"gdl_country_shdi"
)
modelling_data_set <- indicator_data[vars]
modelling_data_set
colSums(is.na(modelling_data_set))
source("~/research/phd/chapter-6-analysis/src/02-data-exploration/04-aggregating-categories.R")
modelling_data_set
nrow(modelling_data_set)
table(complete.cases(modelling_data_set))
rlang::last_error()
pair_plot <- modelling_data_set %>%
select_if( is.numeric) %>%
mutate_all(as.numeric) %>%
ggpairs(
upper = list(continuous = "cor", combo = "box_no_facet"),
lower = list(continuous = "density", combo = "dot_no_facet"),
diag = list(continuous = "barDiag", combo = "box_no_facet")
)
pair_plot
modelling_data_set
source("~/research/phd/chapter-6-analysis/src/02-data-exploration/04-aggregating-categories.R")
750*0.9
200*0.75
750*0.75
560/750
models <-  list(
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# TVA --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# Weak Prior Model --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
list(
tag="weak_prior_fixed",
data=indicator_data,
formula=bf(log_tva ~ 1 +
#------------------
#Household Level
# Demographics
log_hh_size +
education_cleaned +
#Assets
log_livestock_tlu +
log_land_cultivated +
# Practices
off_farm_any+
till_not_by_hand+
external_labour+
pesticide+
debts_have+
aidreceived+
livestock_inputs_any+
land_irrigated_any+
#------------------
# Village Level
norm_growing_period +
log_min_travel_time +
log_pop_dens +
#------------------
#County Level
norm_gdl_country_shdi+
# Levels
(1 | iso_country_code) +
(1 | iso_country_code:village)),
prior="weak"
),
list(
tag="weak_prior_mixed_country",
data=indicator_data,
formula=bf(log_tva ~ 1 +
#Household Level
# Demographics
log_hh_size +
education_cleaned +
#Assets
log_livestock_tlu +
log_land_cultivated +
# Practices
off_farm_any+
till_not_by_hand+
external_labour+
pesticide+
debts_have+
aidreceived+
livestock_inputs_any+
land_irrigated_any+
#------------------
# Village Level
norm_growing_period +
log_min_travel_time +
log_pop_dens +
#------------------
#County Level
norm_gdl_country_shdi+
# Levels
(1 +
log_land_cultivated +
log_livestock_tlu +
off_farm_any | iso_country_code) +
(1 | iso_country_code:village)),
prior="weak"),
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# Horse Shoe Model --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
list(
tag="horseshoe_fixed",
data=indicator_data,
formula=bf(log_tva ~ 1 +
#Household Level
# Demographics
log_hh_size +
education_cleaned +
#Assets
log_livestock_tlu +
log_land_cultivated +
# Practices
off_farm_any+
till_not_by_hand+
external_labour+
pesticide+
debts_have+
aidreceived+
livestock_inputs_any+
land_irrigated_any+
#------------------
# Village Level
norm_growing_period +
log_min_travel_time +
log_pop_dens +
#------------------
#County Level
norm_gdl_country_shdi+
# Levels
(1 | iso_country_code) +
(1 | iso_country_code:village)),
prior="horseshoe"
),
list(
tag="horseshoe_mixed_country",
data=indicator_data,
formula=bf(log_tva ~ 1 +
#Household Level
# Demographics
log_hh_size +
education_cleaned +
#Assets
log_livestock_tlu +
log_land_cultivated +
# Practices
off_farm_any+
till_not_by_hand+
external_labour+
pesticide+
debts_have+
aidreceived+
livestock_inputs_any+
land_irrigated_any+
#------------------
# Village Level
norm_growing_period +
log_min_travel_time +
log_pop_dens +
#------------------
#County Level
norm_gdl_country_shdi+
# Levels
(1 +
log_land_cultivated +
log_livestock_tlu +
off_farm_any | iso_country_code) +
(1 | iso_country_code:village)),
prior="horseshoe"),
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# HDDS --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# Weak Prior Model --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
list(
tag="weak_prior_fixed",
data=indicator_data,
formula=bf(norm_hdds_lean_season ~ 1 +
#------------------
#Household Level
# Demographics
log_hh_size +
education_cleaned +
#Assets
log_livestock_tlu +
log_land_cultivated +
# Practices
off_farm_any+
till_not_by_hand+
external_labour+
pesticide+
debts_have+
aidreceived+
livestock_inputs_any+
land_irrigated_any+
#------------------
# Village Level
norm_growing_period +
log_min_travel_time +
log_pop_dens +
#------------------
#County Level
norm_gdl_country_shdi+
# Levels
(1 | iso_country_code) +
(1 | iso_country_code:village)),
prior="weak"
),
list(
tag="weak_prior_mixed_country",
data=indicator_data,
formula=bf(norm_hdds_lean_season ~ 1 +
#Household Level
# Demographics
log_hh_size +
education_cleaned +
#Assets
log_livestock_tlu +
log_land_cultivated +
# Practices
off_farm_any+
till_not_by_hand+
external_labour+
pesticide+
debts_have+
aidreceived+
livestock_inputs_any+
land_irrigated_any+
log_pop_dens +
#------------------
# Village Level
norm_growing_period +
log_min_travel_time +
log_pop_dens +
#------------------
#County Level
norm_gdl_country_shdi+
# Levels
(1 +
log_land_cultivated +
log_livestock_tlu +
off_farm_any | iso_country_code) +
(1 | iso_country_code:village)),
prior="weak"),
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
# Horse Shoe Model --------------------------------------------------------
# -------------------------------------------------------------------------
# -------------------------------------------------------------------------
list(
tag="horseshoe_fixed",
data=indicator_data,
formula=bf(norm_hdds_lean_season ~ 1 +
#Household Level
# Demographics
log_hh_size +
education_cleaned +
#Assets
log_livestock_tlu +
log_land_cultivated +
# Practices
off_farm_any+
till_not_by_hand+
external_labour+
pesticide+
debts_have+
aidreceived+
livestock_inputs_any+
land_irrigated_any+
#------------------
# Village Level
norm_growing_period +
log_min_travel_time +
log_pop_dens +
#------------------
#County Level
norm_gdl_country_shdi+
# Levels
(1 | iso_country_code) +
(1 | iso_country_code:village)),
prior="horseshoe"
),
list(
tag="horseshoe_mixed_country",
data=indicator_data,
formula=bf(norm_hdds_lean_season ~ 1 +
#Household Level
# Demographics
log_hh_size +
education_cleaned +
#Assets
log_livestock_tlu +
log_land_cultivated +
# Practices
off_farm_any+
till_not_by_hand+
external_labour+
pesticide+
debts_have+
aidreceived+
livestock_inputs_any+
land_irrigated_any+
#------------------
# Village Level
norm_growing_period +
log_min_travel_time +
log_pop_dens +
#------------------
#County Level
norm_gdl_country_shdi+
# Levels
(1 +
log_land_cultivated +
log_livestock_tlu +
off_farm_any | iso_country_code) +
(1 | iso_country_code:village)),
prior="horseshoe")
)
models
modelling_data_set
complete.cases()
complete.cases(modelling_data_set)
table(complete.cases(modelling_data_set))
